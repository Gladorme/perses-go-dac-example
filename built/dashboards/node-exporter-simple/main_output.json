{"kind":"Dashboard","metadata":{"name":"node-exporter-simple","createdAt":"0001-01-01T00:00:00Z","updatedAt":"0001-01-01T00:00:00Z","version":0,"project":"gladorme"},"spec":{"display":{"name":"Node Exporter Simple"},"variables":[{"kind":"TextVariable","spec":{"display":{"hidden":true},"value":"erd4","constant":true,"name":"stack"}},{"kind":"TextVariable","spec":{"display":{"hidden":true},"value":"system","constant":true,"name":"prometheus"}},{"kind":"TextVariable","spec":{"value":"cmdbrtu-custom-sd","constant":true,"name":"job"}},{"kind":"ListVariable","spec":{"display":{"name":"Host","hidden":false},"allowAllValue":false,"allowMultiple":false,"plugin":{"kind":"PrometheusPromQLVariable","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"expr":"group by (instance) (node_uname_info{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\"})","labelName":"instance"}},"name":"instance"}}],"panels":{"0_0":{"kind":"Panel","spec":{"display":{"name":"Sys Load (5m avg)","description":"Busy state of all CPU cores together (5 min average)"},"plugin":{"kind":"GaugeChart","spec":{"calculation":"last-number","format":{"unit":"percent"},"thresholds":{"steps":[{"value":0,"color":"rgba(50, 172, 45, 0.97)"},{"value":80,"color":"rgba(237, 129, 40, 0.89)"},{"value":90,"color":"rgba(245, 54, 54, 0.9)"}]},"max":100}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tavg_over_time(node_load5{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval]) * 100\n                /\n                on(instance) group_left sum by (instance) (\n                    irate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n                )\n            "}}}}]}},"0_1":{"kind":"Panel","spec":{"display":{"name":"RAM Used","description":"Non available RAM"},"plugin":{"kind":"GaugeChart","spec":{"calculation":"last-number","format":{"unit":"percent"},"thresholds":{"steps":[{"value":0,"color":"rgba(50, 172, 45, 0.97)"},{"value":80,"color":"rgba(237, 129, 40, 0.89)"},{"value":90,"color":"rgba(245, 54, 54, 0.9)"}]},"max":100}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\t100 - (\n\t\t\t\t\t(\n\t\t\t\t\t\tavg_over_time(node_memory_MemAvailable_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t\t\t*\n\t\t\t\t\t\t100\n\t\t\t\t\t) \n\t\t\t\t\t/\n\t\t\t\t\tavg_over_time(node_memory_MemTotal_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            "}}}}]}},"0_2":{"kind":"Panel","spec":{"display":{"name":"RootFS Total","description":"Used Root FS"},"plugin":{"kind":"GaugeChart","spec":{"calculation":"last-number","format":{"unit":"percent"},"thresholds":{"steps":[{"value":0,"color":"rgba(50, 172, 45, 0.97)"},{"value":80,"color":"rgba(237, 129, 40, 0.89)"},{"value":90,"color":"rgba(245, 54, 54, 0.9)"}]},"max":100}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\t100 - (\n                        (\n                            avg_over_time(node_filesystem_avail_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\",mountpoint=\"/\",fstype!=\"rootfs\"}[$__rate_interval])\n                            *\n                            100\n                        )\n                        /\n                        avg_over_time(node_filesystem_size_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\",mountpoint=\"/\",fstype!=\"rootfs\"}[$__rate_interval])\n                    )\n            "}}}}]}},"0_3":{"kind":"Panel","spec":{"display":{"name":"CPU Cores","description":"Total number of CPU cores"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"decimal"},"thresholds":{"defaultColor":"#7b7b7b"}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tcount(count(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}) by (cpu))\n            "}}}}]}},"0_4":{"kind":"Panel","spec":{"display":{"name":"RAM Total","description":"Total RAM"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"thresholds":{"defaultColor":"#7b7b7b"}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_memory_MemTotal_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n            "}}}}]}},"0_5":{"kind":"Panel","spec":{"display":{"name":"RootFS Total","description":"Total RootFS"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"thresholds":{"defaultColor":"#7b7b7b"}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_filesystem_size_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\",mountpoint=\"/\",fstype!=\"rootfs\"}\n            "}}}}]}},"0_6":{"kind":"Panel","spec":{"display":{"name":"System uptime","description":"System uptime"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"seconds"},"thresholds":{"defaultColor":"#7b7b7b"}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_time_seconds{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n                -\n                node_boot_time_seconds{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n            "}}}}]}},"1_0":{"kind":"Panel","spec":{"display":{"name":"CPU Basic","description":"Basic CPU info"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"position":"right","mode":"table","values":["min","max"]},"yAxis":{"format":{"unit":"percent-decimal"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tsum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\", mode=\"system\"}[$__rate_interval])\n\t\t\t\t)\n\t\t\t\t/ \n\t\t\t\ton(instance) group_left sum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            ","seriesNameFormat":"System"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tsum by(instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\", mode=\"user\"}[$__rate_interval])\n\t\t\t\t)\n\t\t\t\t/ on(instance) group_left sum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            ","seriesNameFormat":"User"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tsum by(instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\", mode=\"iowait\"}[$__rate_interval])\n\t\t\t\t)\n\t\t\t\t/ on(instance) group_left sum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            ","seriesNameFormat":"IOWait"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tsum by(instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\", mode=~\".*irq\"}[$__rate_interval])\n\t\t\t\t) \n\t\t\t\t/ on(instance) group_left sum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            ","seriesNameFormat":"IRQ \u0026 SOFTIRQ"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tsum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\", mode!='idle',mode!='user',mode!='system',mode!='iowait',mode!='irq',mode!='softirq'}[$__rate_interval])\n\t\t\t\t)\n\t\t\t\t/ on(instance) group_left sum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            ","seriesNameFormat":"Other"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tsum by(instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\", mode=\"idle\"}[$__rate_interval])\n\t\t\t\t)\n\t\t\t\t/ on(instance) group_left sum by (instance) (\n\t\t\t\t\tirate(node_cpu_seconds_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval])\n\t\t\t\t)\n            ","seriesNameFormat":"Idle"}}}}]}},"1_1":{"kind":"Panel","spec":{"display":{"name":"Memory Basic","description":"Basic memory usage"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"position":"right","mode":"table","values":["min","max"]},"yAxis":{"format":{"unit":"bytes"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_memory_MemTotal_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n            ","seriesNameFormat":"RAM Total"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_memory_MemTotal_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t- node_memory_MemFree_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t- (\n\t\t\t\t\tnode_memory_Cached_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t\t+ node_memory_Buffers_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t\t+ node_memory_SReclaimable_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t)\n            ","seriesNameFormat":"RAM Used"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_memory_Cached_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t+ node_memory_Buffers_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n\t\t\t\t+ node_memory_SReclaimable_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n            ","seriesNameFormat":"RAM Cache + Buffer"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_memory_MemFree_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n            ","seriesNameFormat":"RAM Free"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n\t\t\t\tnode_memory_SwapTotal_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"} - node_memory_SwapFree_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}\n            ","seriesNameFormat":"SWAP used"}}}}]}},"1_2":{"kind":"Panel","spec":{"display":{"name":"Network Traffic Basic","description":"Basic network info per interface"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"position":"right","mode":"table","values":["min","max"]},"yAxis":{"format":{"unit":"decimal"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n                irate(node_network_receive_bytes_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval]) * 8\n            ","seriesNameFormat":"recv {{device}}"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n                irate(node_network_transmit_bytes_total{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\"}[$__rate_interval]) * 8\n            ","seriesNameFormat":"trans {{device}}"}}}}]}},"1_3":{"kind":"Panel","spec":{"display":{"name":"Disk Space Used Basic","description":"Disk space used of all filesystems mounted"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"position":"right","mode":"table","values":["min","max"]},"yAxis":{"format":{"unit":"percent"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"argos-world"},"query":"\n                100 - (\n                    (node_filesystem_avail_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\",device!~'rootfs'} * 100)\n                    /\n                    node_filesystem_size_bytes{stack=\"$stack\",prometheus=\"$prometheus\",job=\"$job\",instance=\"$instance\",device!~'rootfs'}\n                )\n            ","seriesNameFormat":"{{mountpoint}}"}}}}]}}},"layouts":[{"kind":"Grid","spec":{"display":{"title":"Quick CPU / Mem / Disk"},"items":[{"x":0,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_0"}},{"x":3,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_1"}},{"x":6,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_2"}},{"x":9,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_3"}},{"x":12,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_4"}},{"x":15,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_5"}},{"x":18,"y":0,"width":3,"height":6,"content":{"$ref":"#/spec/panels/0_6"}}]}},{"kind":"Grid","spec":{"display":{"title":"Basic CPU / Mem / Net / Disk"},"items":[{"x":0,"y":0,"width":12,"height":7,"content":{"$ref":"#/spec/panels/1_0"}},{"x":12,"y":0,"width":12,"height":7,"content":{"$ref":"#/spec/panels/1_1"}},{"x":0,"y":7,"width":12,"height":7,"content":{"$ref":"#/spec/panels/1_2"}},{"x":12,"y":7,"width":12,"height":7,"content":{"$ref":"#/spec/panels/1_3"}}]}}],"duration":"1h"}}